# ProductInsightAI

ä¸€ä¸ªåŸºäº AI çš„è§’è‰²æ‰®æ¼”èŠå¤©åº”ç”¨ï¼Œè®©ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸åŒçš„åœºæ™¯å’Œè§’è‰²ï¼Œä¸ AI è¿›è¡Œæ²‰æµ¸å¼å¯¹è¯ä½“éªŒã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

- **ğŸ­ å¤šè§’è‰²æ‰®æ¼”**ï¼šä¸ä¸åŒæ€§æ ¼çš„ AI è§’è‰²äº’åŠ¨
- **ğŸ° å¤šç§åœºæ™¯**ï¼šçš‡å®¶å®«å»·ã€å¤ªç©ºæ¢ç´¢ã€æœªæ¥éƒ½å¸‚ç­‰ä¸°å¯Œåœºæ™¯
- **ğŸ¤– æ™ºèƒ½å¯¹è¯**ï¼šåŸºäº OpenAI GPT-4 çš„é«˜è´¨é‡ AI å¯¹è¯
- **ğŸ¨ ç°ä»£ç•Œé¢**ï¼šä½¿ç”¨ React + TypeScript + Tailwind CSS æ„å»ºçš„ç¾è§‚ UI
- **âš¡ å®æ—¶ä½“éªŒ**ï¼šå¿«é€Ÿå“åº”çš„èŠå¤©ä½“éªŒ

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Radix UI** - æ— éšœç¢ç»„ä»¶åº“

### åç«¯
- **Node.js** - JavaScript è¿è¡Œæ—¶
- **Express** - Web åº”ç”¨æ¡†æ¶
- **TypeScript** - æœåŠ¡ç«¯ç±»å‹å®‰å…¨
- **OpenAI API** - AI å¯¹è¯èƒ½åŠ›
- **Drizzle ORM** - æ•°æ®åº“ ORM

### æ•°æ®åº“
- **PostgreSQL** - ä¸»æ•°æ®åº“ï¼ˆå¯é€‰ï¼Œä½¿ç”¨ Neon äº‘æ•°æ®åº“ï¼‰

## ğŸ“‹ å‰ææ¡ä»¶

ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š

- **Node.js** >= 16.0.0
- **npm** æˆ– **yarn**
- **OpenAI API Key**ï¼ˆå¿…éœ€ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd ProductInsightAI
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# OpenAI API é…ç½®ï¼ˆå¿…éœ€ï¼‰
OPENAI_API_KEY=your_openai_api_key_here

# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤æ•°æ®ï¼‰
DATABASE_URL=your_postgresql_connection_string
```

**è·å– OpenAI API Keyï¼š**
1. è®¿é—® [OpenAI Platform](https://platform.openai.com/)
2. æ³¨å†Œ/ç™»å½•è´¦æˆ·
3. è¿›å…¥ API Keys é¡µé¢
4. åˆ›å»ºæ–°çš„ API Key
5. å°† API Key æ·»åŠ åˆ° `.env` æ–‡ä»¶ä¸­

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:5000` å¯åŠ¨

### 5. è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ [http://localhost:5000](http://localhost:5000)

## ğŸ“± ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **é€‰æ‹©åœºæ™¯**ï¼šä»å¤šä¸ªé¢„è®¾åœºæ™¯ä¸­é€‰æ‹©ä¸€ä¸ªï¼ˆçš‡å®¶å®«å»·ã€å¤ªç©ºæ¢ç´¢ç­‰ï¼‰
2. **é€‰æ‹©è§’è‰²**ï¼šé€‰æ‹©ä½ æƒ³è¦å¯¹è¯çš„ AI è§’è‰²
3. **å¼€å§‹å¯¹è¯**ï¼šåœ¨èŠå¤©ç•Œé¢ä¸­ä¸ AI è§’è‰²è¿›è¡Œå¯¹è¯
4. **è§’è‰²æ‰®æ¼”**ï¼šAI ä¼šæ ¹æ®è§’è‰²è®¾å®šå’Œåœºæ™¯èƒŒæ™¯å›åº”ä½ çš„æ¶ˆæ¯

### å¯ç”¨åœºæ™¯

- **ğŸ° Royal Court** - ä¸­ä¸–çºªå®«å»·é˜´è°‹
- **ğŸš€ Star Voyager** - æ·±ç©ºæ¢ç´¢å†’é™©
- **ğŸŒƒ Neo Tokyo** - æœªæ¥ä¸»ä¹‰éƒ½å¸‚å†’é™©
- **ğŸï¸ Tropical Getaway** - å¤©å ‚å²›å±¿åº¦å‡æ‘
- **ğŸŒ² Enchanted Woods** - é­”æ³•æ£®æ—å†’é™©
- **â˜¢ï¸ Wasteland** - åºŸåœŸç”Ÿå­˜

### è§’è‰²ç±»å‹

æ¯ä¸ªè§’è‰²éƒ½æœ‰ç‹¬ç‰¹çš„ï¼š
- **èƒŒæ™¯æ•…äº‹**
- **æ€§æ ¼ç‰¹å¾**
- **è¯´è¯é£æ ¼**
- **è¡Œä¸ºæ¨¡å¼**

## ğŸ”§ å¼€å‘

### é¡¹ç›®ç»“æ„

```
ProductInsightAI/
â”œâ”€â”€ client/                 # å‰ç«¯ä»£ç 
â”‚   â””â”€â”€ src/
â”œâ”€â”€ server/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.ts           # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ routes.ts          # API è·¯ç”±
â”‚   â”œâ”€â”€ storage.ts         # æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ openai.ts      # OpenAI é›†æˆ
â”œâ”€â”€ shared/                # å…±äº«ç±»å‹å®šä¹‰
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

### å¯ç”¨è„šæœ¬

```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# ç±»å‹æ£€æŸ¥
npm run check

# æ•°æ®åº“æ¨é€ï¼ˆå¦‚æœä½¿ç”¨æ•°æ®åº“ï¼‰
npm run db:push
```

### API ç«¯ç‚¹

#### åœºæ™¯ API
- `GET /api/scenes` - è·å–æ‰€æœ‰åœºæ™¯
- `GET /api/scenes/:id` - è·å–ç‰¹å®šåœºæ™¯

#### è§’è‰² API
- `GET /api/characters` - è·å–æ‰€æœ‰è§’è‰²
- `GET /api/characters/:id` - è·å–ç‰¹å®šè§’è‰²

#### èŠå¤© API
- `GET /api/chats` - è·å–æ‰€æœ‰èŠå¤©è®°å½•
- `POST /api/chats` - åˆ›å»ºæ–°èŠå¤©
- `GET /api/chats/:id` - è·å–ç‰¹å®šèŠå¤©
- `GET /api/chats/:id/messages` - è·å–èŠå¤©æ¶ˆæ¯
- `POST /api/chats/:id/messages` - å‘é€æ¶ˆæ¯
- `POST /api/chats/:id/generate` - ç”Ÿæˆ AI å›å¤

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. OpenAI API è¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼šçœ‹åˆ° "Using simulated responses" è­¦å‘Š

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”åŒ…å«æœ‰æ•ˆçš„ `OPENAI_API_KEY`
2. ç¡®è®¤ API Key æ ¼å¼æ­£ç¡®ï¼ˆä»¥ `sk-` å¼€å¤´ï¼‰
3. éªŒè¯ API Key æ˜¯å¦æœ‰æ•ˆï¼š
   ```bash
   curl -H "Authorization: Bearer YOUR_API_KEY" https://api.openai.com/v1/models
   ```

#### 2. ç«¯å£ 5000 è¢«å ç”¨

**ç—‡çŠ¶**ï¼š`EADDRINUSE: address already in use :::5000`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :5000

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>
```

#### 3. ç½‘ç»œç»‘å®šé”™è¯¯ (macOS)

**ç—‡çŠ¶**ï¼š`ENOTSUP: operation not supported on socket 0.0.0.0:5000`

**è§£å†³æ–¹æ¡ˆ**ï¼šé¡¹ç›®å·²é…ç½®ä¸ºä½¿ç”¨ `localhost` è€Œé `0.0.0.0`ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·é‡å¯æœåŠ¡å™¨ã€‚

#### 4. æ¨¡å—æ‰¾ä¸åˆ°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ node_modules å¹¶é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### éªŒè¯å®‰è£…

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯å„ç»„ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```bash
# æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
curl http://localhost:5000

# æ£€æŸ¥ API å“åº”
curl http://localhost:5000/api/scenes

# æ£€æŸ¥ OpenAI é›†æˆï¼ˆåº”è¯¥çœ‹åˆ°æ™ºèƒ½å›å¤ï¼Œè€Œéæ¨¡æ¿å›å¤ï¼‰
curl -X POST "http://localhost:5000/api/chats" \
     -H "Content-Type: application/json" \
     -d '{"sceneId": 1, "characterId": 1, "title": "Test"}'
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥ [Issues](link-to-issues)
3. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜

---

**äº«å—ä¸ AI è§’è‰²çš„å¯¹è¯ä½“éªŒï¼** ğŸ­âœ¨ 