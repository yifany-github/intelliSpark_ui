# Adminå›¾ç‰‡ç®¡ç†åŠŸèƒ½å®ŒæˆæŠ¥å‘Š

## ğŸ¯ ä»»åŠ¡å®Œæˆæƒ…å†µ

âœ… **åœ¨adminç•Œé¢æ·»åŠ è§’è‰²å›¾ç‰‡ç®¡ç†åŠŸèƒ½**  
âœ… **åˆ›å»ºå›¾ç‰‡é€‰æ‹©å™¨ç»„ä»¶**  
âœ… **å®ç°å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆåŠŸèƒ½**  
âœ… **æ·»åŠ åç«¯APIæ”¯æŒå›¾ç‰‡ç®¡ç†**  
âœ… **ä¸ºè§’è‰²å’Œåœºæ™¯å¡ç‰‡æ·»åŠ å›¾ç‰‡é¢„è§ˆ**  

## ğŸ“‹ å®ç°åŠŸèƒ½æ¸…å•

### 1. åç«¯APIæ”¯æŒ
- **æ–°å¢APIç«¯ç‚¹**: `/api/admin/assets/images`
- **æ”¯æŒå›¾ç‰‡ç±»å‹**: characters, scenes
- **è‡ªåŠ¨ç›®å½•æ‰«æ**: æ‰«æ `attached_assets/` ç›®å½•
- **å¤šæ ¼å¼æ”¯æŒ**: jpg, jpeg, png, gif, webp
- **è¿”å›ä¿¡æ¯**: æ–‡ä»¶åã€æ˜¾ç¤ºåã€URLã€æ–‡ä»¶å¤§å°

### 2. å‰ç«¯å›¾ç‰‡é€‰æ‹©å™¨ç»„ä»¶
- **æ–‡ä»¶**: `/client/src/components/admin/ImageSelector.tsx`
- **åŠŸèƒ½ç‰¹æ€§**:
  - ğŸ–¼ï¸ å›¾ç‰‡ç½‘æ ¼æµè§ˆ
  - ğŸ” å®æ—¶æœç´¢åŠŸèƒ½
  - ğŸ“ æ‰‹åŠ¨URLè¾“å…¥
  - ğŸ¯ å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
  - ğŸ“± å“åº”å¼è®¾è®¡
  - âš¡ é”™è¯¯å¤„ç†

### 3. Adminç•Œé¢é›†æˆ
- **è§’è‰²ç®¡ç†**: é›†æˆImageSelectoråˆ°è§’è‰²è¡¨å•
- **åœºæ™¯ç®¡ç†**: é›†æˆImageSelectoråˆ°åœºæ™¯è¡¨å•
- **å¡ç‰‡é¢„è§ˆ**: è§’è‰²å¡ç‰‡æ˜¾ç¤ºåœ†å½¢å¤´åƒ
- **åœºæ™¯é¢„è§ˆ**: åœºæ™¯å¡ç‰‡æ˜¾ç¤ºçŸ©å½¢é¢„è§ˆå›¾

### 4. å›¾ç‰‡å­˜å‚¨è§„èŒƒ
- **è§’è‰²å›¾ç‰‡è·¯å¾„**: `/attached_assets/characters_img/`
- **åœºæ™¯å›¾ç‰‡è·¯å¾„**: `/attached_assets/scenes_img/`
- **URLæ ¼å¼**: `/assets/characters_img/æ–‡ä»¶å.æ‰©å±•å`
- **é™æ€æ–‡ä»¶æœåŠ¡**: å·²é…ç½®FastAPIé™æ€æ–‡ä»¶æœåŠ¡

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯ä¿®æ”¹æ–‡ä»¶
- `/backend/admin/routes.py` - æ–°å¢å›¾ç‰‡ç®¡ç†API
- `/backend/main.py` - é™æ€æ–‡ä»¶æœåŠ¡é…ç½® (å·²å­˜åœ¨)

### å‰ç«¯æ–°å¢æ–‡ä»¶
- `/client/src/components/admin/ImageSelector.tsx` - å›¾ç‰‡é€‰æ‹©å™¨ç»„ä»¶

### å‰ç«¯ä¿®æ”¹æ–‡ä»¶
- `/client/src/pages/admin/index.tsx` - é›†æˆå›¾ç‰‡é€‰æ‹©å™¨å’Œé¢„è§ˆ

## ğŸ“ ç›®å½•ç»“æ„

```
attached_assets/
â”œâ”€â”€ characters_img/
â”‚   â”œâ”€â”€ Elara.jpeg
â”‚   â”œâ”€â”€ test_character.jpg
â”‚   â””â”€â”€ Elara_real.jpg
â””â”€â”€ scenes_img/
    â”œâ”€â”€ royal_court.jpeg
    â””â”€â”€ test_scene.jpg
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ·»åŠ å›¾ç‰‡
å°†å›¾ç‰‡æ–‡ä»¶æ”¾å…¥ç›¸åº”ç›®å½•ï¼š
```bash
cp your_image.jpg attached_assets/characters_img/
cp your_scene.png attached_assets/scenes_img/
```

### 2. åœ¨Adminç•Œé¢é€‰æ‹©å›¾ç‰‡
1. ç™»å½•adminç•Œé¢
2. è¿›å…¥Charactersæˆ–Scenesæ ‡ç­¾
3. ç‚¹å‡»Add/EditæŒ‰é’®
4. åœ¨å›¾ç‰‡å­—æ®µç‚¹å‡»"Browse"æŒ‰é’®
5. é€‰æ‹©å›¾ç‰‡æˆ–è¾“å…¥URL
6. å®æ—¶é¢„è§ˆé€‰ä¸­çš„å›¾ç‰‡

### 3. å›¾ç‰‡æ˜¾ç¤º
- **Adminç•Œé¢**: è§’è‰²/åœºæ™¯å¡ç‰‡æ˜¾ç¤ºé¢„è§ˆ
- **Charactersé¡µé¢**: ä½¿ç”¨ç›¸åŒçš„å›¾ç‰‡URL
- **Chatç•Œé¢**: æ˜¾ç¤ºè§’è‰²å¤´åƒ

## ğŸ¨ UIç‰¹æ€§

### å›¾ç‰‡é€‰æ‹©å™¨
- **ç½‘æ ¼å¸ƒå±€**: å“åº”å¼å›¾ç‰‡ç½‘æ ¼
- **æœç´¢åŠŸèƒ½**: æŒ‰æ–‡ä»¶åæœç´¢
- **é€‰æ‹©çŠ¶æ€**: è“è‰²è¾¹æ¡†å’Œå‹¾é€‰å›¾æ ‡
- **é¢„è§ˆåŠŸèƒ½**: é€‰ä¸­å›¾ç‰‡çš„å¤§é¢„è§ˆ
- **æ‰‹åŠ¨è¾“å…¥**: æ”¯æŒå¤–éƒ¨URL

### å¡ç‰‡é¢„è§ˆ
- **è§’è‰²å¡ç‰‡**: 12x12åƒç´ åœ†å½¢å¤´åƒ
- **åœºæ™¯å¡ç‰‡**: 24åƒç´ é«˜åº¦çŸ©å½¢é¢„è§ˆ
- **é”™è¯¯å¤„ç†**: å›¾ç‰‡åŠ è½½å¤±è´¥æ˜¾ç¤ºé»˜è®¤å›¾æ ‡

## ğŸ”„ æ•°æ®æµç¨‹

1. **å›¾ç‰‡å­˜å‚¨**: æ–‡ä»¶æ”¾å…¥ `/attached_assets/` ç›®å½•
2. **APIè·å–**: åç«¯æ‰«æç›®å½•è¿”å›å›¾ç‰‡åˆ—è¡¨
3. **å‰ç«¯æ˜¾ç¤º**: å›¾ç‰‡é€‰æ‹©å™¨å±•ç¤ºå¯ç”¨å›¾ç‰‡
4. **é€‰æ‹©ä¿å­˜**: å›¾ç‰‡URLä¿å­˜åˆ°æ•°æ®åº“
5. **å‰ç«¯æ˜¾ç¤º**: Characters/Chaté¡µé¢ä½¿ç”¨ç›¸åŒURL

## ğŸ“Š APIæ¥å£

### è·å–å›¾ç‰‡åˆ—è¡¨
```
GET /api/admin/assets/images?asset_type=characters
GET /api/admin/assets/images?asset_type=scenes
```

### å“åº”æ ¼å¼
```json
{
  "images": [
    {
      "filename": "Elara.jpeg",
      "name": "Elara",
      "url": "/assets/characters_img/Elara.jpeg",
      "size": 27
    }
  ]
}
```

## ğŸ¯ åŠŸèƒ½éªŒè¯

### æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º
- `attached_assets/characters_img/Elara.jpeg`
- `attached_assets/characters_img/test_character.jpg`
- `attached_assets/scenes_img/royal_court.jpeg`
- `attached_assets/scenes_img/test_scene.jpg`

### é™æ€æ–‡ä»¶æœåŠ¡
- URL: `http://localhost:8000/assets/characters_img/Elara.jpeg`
- é…ç½®: FastAPI StaticFiles middleware

## ğŸ”® æ‰©å±•åŠŸèƒ½
å½“å‰ç³»ç»Ÿå·²é¢„ç•™æ¥å£ï¼Œæœªæ¥å¯æ‰©å±•ï¼š
- ç›´æ¥ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½
- å›¾ç‰‡å°ºå¯¸è°ƒæ•´
- æ‰¹é‡å›¾ç‰‡ç®¡ç†
- å›¾ç‰‡æ ¼å¼è½¬æ¢

## âœ… å®ŒæˆçŠ¶æ€

æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆå¹¶å¯æ­£å¸¸ä½¿ç”¨ï¼š
- âœ… åç«¯APIæ­£å¸¸å·¥ä½œ
- âœ… å‰ç«¯ç»„ä»¶å®Œæ•´å®ç°
- âœ… Adminç•Œé¢é›†æˆå®Œæˆ
- âœ… å›¾ç‰‡é¢„è§ˆåŠŸèƒ½æ­£å¸¸
- âœ… é™æ€æ–‡ä»¶æœåŠ¡é…ç½®æ­£ç¡®
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„

**ç°åœ¨å¯ä»¥åœ¨adminç•Œé¢ä¸­æ–¹ä¾¿åœ°ç®¡ç†è§’è‰²å’Œåœºæ™¯å›¾ç‰‡ï¼Œå›¾ç‰‡ä¼šåœ¨Charactersé¡µé¢å’ŒChatç•Œé¢ä¸­ç»Ÿä¸€æ˜¾ç¤ºã€‚**